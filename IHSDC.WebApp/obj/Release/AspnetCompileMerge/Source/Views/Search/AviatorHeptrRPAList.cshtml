@model IHSDC.WebApp.Models.AviatorHeptrRPACRUD
@using IHSDC.WebApp.Connection
@{
    ViewBag.Title = "Aviator Heptr RPA ";
    Layout = "~/Views/Shared/_NewAA7Layout_Search.cshtml"; int sno = 0;
}
<div class="card-body">


    <div id="accordion">
        <div class="card" style="box-shadow: 1px 0px 9px -1px;">
            @*<div class="card-header collapsCol" id="headingOne">
                <h5 class="mb-0">
                    <button class="btn btn-link btnCol" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        Search
                    </button>
                </h5>
            </div>*@
            @*<div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">*@
            <div class="card-body" style="padding: 0.6rem;">

                @using (Html.BeginForm("AviatorHeptrRPAList", "Search", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    <div class="row">
                        <div class="col">
                            <label><b>Criteria 1</b></label>
                            @Html.DropDownListFor(m => m.Col1, (new IHSDC.WebApp.Models.MasterModels()).LoadAviatorHeptrRPACol(), "--Select--", new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true", @required = true })

                        </div>
                        <div class="col">
                            <label><b>Contains</b></label>
                            @Html.DropDownListFor(m => m.ColContains1, (new IHSDC.WebApp.Models.MasterModels()).LoadContainsCol(), new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Value</b></label>
                            @Html.TextBoxFor(m => m.ColVal1, new { @class = "form-control", @onkeypress = "return onlyAlphaNumeric(event)" })
                        </div>
                        <div class="col">
                            <label><b>Criteria 2</b></label>
                            @Html.DropDownListFor(m => m.Col2, (new IHSDC.WebApp.Models.MasterModels()).LoadAviatorHeptrRPACol(), "--Select--", new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Contains</b></label>
                            @Html.DropDownListFor(m => m.ColContains2, (new IHSDC.WebApp.Models.MasterModels()).LoadContainsCol(), new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Value</b></label>
                            @Html.TextBoxFor(m => m.ColVal2, new { @class = "form-control", @onkeypress = "return onlyAlphaNumeric(event)" })
                        </div>
                    </div>

                    @*<div class="row">
                        <div class="col">
                            <label><b>Criteria 3</b></label>
                            @Html.DropDownListFor(m => m.Col3, (new IHSDC.WebApp.Models.MasterModels()).LoadAviatorHeptrRPACol(), "--Select--", new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })

                        </div>
                        <div class="col">
                            <label><b>Contains</b></label>
                            @Html.DropDownListFor(m => m.ColContains3, (new IHSDC.WebApp.Models.MasterModels()).LoadContainsCol(), new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Value</b></label>
                            @Html.TextBoxFor(m => m.ColVal3, new { @class = "form-control", @onkeypress = "return onlyAlphaNumeric(event)" })
                        </div>
                        <div class="col">
                            <label><b>Criteria 4</b></label>
                            @Html.DropDownListFor(m => m.Col4, (new IHSDC.WebApp.Models.MasterModels()).LoadAviatorHeptrRPACol(), "--Select--", new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Contains</b></label>
                            @Html.DropDownListFor(m => m.ColContains4, (new IHSDC.WebApp.Models.MasterModels()).LoadContainsCol(), new { @data_show_subtext = "true", @class = "select form-control", @data_live_search = "true" })
                        </div>
                        <div class="col">
                            <label><b>Value</b></label>
                            @Html.TextBoxFor(m => m.ColVal4, new { @class = "form-control", @onkeypress = "return onlyAlphaNumeric(event)" })
                        </div>
                    </div>*@
                    <br />
                    <div class="row">
                        <div class="col">
                            <input class="btn btn-info" type="submit" value="Search" />
                        </div>
                    </div>
                }
            </div>
            @*</div>*@
        </div>
    </div>



    <br />

    <div class="row">
        <div class="col-10">

        </div>
        <div class="col-2">

            <div class="row">
                <a onclick="convertIntoPDF('AviatorHeptrRPA');"> <img src="~/Images/PDF.png" alt="" width="40" height="45" id="btnExport" value="Export Pdf"> </a>

                @*<a onclick="convertIntoWord('AviatorHeptrRPA');"> <img src="~/Images/word.png" alt="" width="40" height="45" id="btnExport" value="Export Pdf"> </a>*@

            </div>
        </div>
    </div>

    @*<div class="row">
            <div class="col-10">
            </div>
            <div class="col-2">
                <div class="dropdown">
                    <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                        Download & Print
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" onclick="convertIntoPDF('AviatorHeptrRPA');">PDF</a>
                        <a class="dropdown-item" onclick="convertIntoWord('AviatorHeptrRPA')">WORD</a>

                    </div>
                </div>
            </div>
        </div>*@

    <br />



    <div class="table-responsive">
        <table class="table table-striped" id="dataTable" width="100%" cellspacing="0">
            <thead class="bg-info text-white">
                <tr>
                    <th class="center">S/No</th>
                    <th class="center">Aviator Name</th>
                    <th class="center">Unit</th>
                    <th class="center">Aircraft Type</th>
                    <th class="center">Aircraft Name</th>
                    <th class="center">Cat Card No</th>
                    <th class="center">Cat Card Date</th>
                    <th class="center">Cat IR</th>
                    <th class="center">Cat IR Date</th>
                    <th class="center">Instr Cat</th>
                    <th class="center">Instr Cat Date</th>
                    <th class="center">RPAS DOW</th>
                    <th class="center">RPAS Substream</th>
                    <th class="center">RPAS Cat Card No</th>
                    <th class="center">RPAS Cat Card Date</th>
                    <th class="center">RPAS Cat</th>
                    <th class="center">RPAS Cat Date</th>
                    <th class="center">RPAS Instr Cat</th>
                    <th class="center">RPAS Instr Cat Date</th>
                    <th class="center"> Status</th>
                    @*<th class="center">View</th>*@

                </tr>
            </thead>
            <tbody id="tbody">
                @if (ViewBag.count > 0)
                {
                    foreach (var item in Model.ILAviatorHeptrRPACRUD)
                    {
                        <tr>
                            <td>
                                @{ sno++; }
                                @sno
                            </td>
                            <td>@Html.DisplayFor(modelItem => item.AviatorName)</td>
                            <td>@item.UnitName</td>
                            <td>@Html.DisplayFor(modelItem => item.AircraftType, (new IHSDC.WebApp.Models.MasterModels()).LoadAircraftTypeMaster())</td>
                            @*<td>@Html.DisplayFor(modelItem => item.AircraftType_ID)</td>*@
                            <td>@Html.DisplayFor(modelItem => item.AircraftName)</td>
                            <td>@Html.DisplayFor(modelItem => item.CatCardNo)</td>
                            <td>@Html.DisplayFor(modelItem => item.CatCardDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.CatIR)</td>
                            <td>@Html.DisplayFor(modelItem => item.CatIRDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.InstrCAT)</td>
                            <td>@Html.DisplayFor(modelItem => item.InstrCatDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPAdowDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPA_Substream)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPA_CatCardNo)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPA_CatCardDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPACat)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPA_CatDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPAInstrCat)</td>
                            <td>@Html.DisplayFor(modelItem => item.RPA_Instr_CatDate)</td>
                            <td>@Html.DisplayFor(modelItem => item.StatusAircraft)</td>
                            @*<td>
                        <a onclick="location.href='@Url.Action("ViewAviatorDetails", "AA7", new { id = IHSDC.WebApp.RepositryManager.EncryptionManager.Encryption(item.Aviator_ID.ToString()) })'">
                            <i class="fa fa-eye" style="font-size:25px" aria-hidden="true"></i>
                        </a>

                    </td>*@

                        </tr>
                    }
                }
                else
                {
                    <tr><td colspan="12" style="font-weight: 600; color: red; text-align: center; background-color: white;"> No Record Found!!!</td></tr>
                }
            </tbody>
        </table>

        <form action="~/Home/Upload" method="post" id="myForm">
            <input type="hidden" name="data1" id="data1">
            <input type="hidden" name="filename" id="filename" value="AviatorApptList">

        </form>



        <script src="~/Scripts/jquery-3.3.1.js"></script>

        <script src="~/Content/CustomJS/alphanumeric.js"></script>
        <script src="~/Scripts/pdf.js"></script>
        <script src="~/Scripts/htmlCanvas.js"></script>
        <script src="~/Content/CustomJS/printFunctions.js"></script>
        <script type="text/javascript">
            function convertIntoPDF(filename) {
                //debugger;
                html2canvas(document.getElementById('dataTable'), {
                    onrendered: function (canvas) {
                        var data = canvas.toDataURL();
                        var docDefinition = {
                            content: [{
                                image: data,
                                width: 500
                            }]
                        };

                        const pdfDocGenerator = pdfMake.createPdf(docDefinition);
                        pdfDocGenerator.getBase64((data) => {
                            $('#data1').val(data);
                            $("#myForm").submit();
                        });
                        ///pdfMake.createPdf(docDefinition).download(filename + ".pdf");
                    }
                });
            }
        </script>
    </div>
</div>




